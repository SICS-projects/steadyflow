/* GioDownloadFile.c generated by valac 0.16.1, the Vala compiler
 * generated from GioDownloadFile.vala, do not modify */

/*
    GioDownloadFile.vala
    Copyright (C) 2010 Maia Kozheva <sikon@ubuntu.com>

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/

#include <glib.h>
#include <glib-object.h>
#include <stdlib.h>
#include <string.h>
#include <float.h>
#include <math.h>
#include <gio/gio.h>
#include <stdio.h>


#define STEADYFLOW_CORE_TYPE_IDOWNLOAD_FILE (steadyflow_core_idownload_file_get_type ())
#define STEADYFLOW_CORE_IDOWNLOAD_FILE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), STEADYFLOW_CORE_TYPE_IDOWNLOAD_FILE, SteadyflowCoreIDownloadFile))
#define STEADYFLOW_CORE_IS_IDOWNLOAD_FILE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), STEADYFLOW_CORE_TYPE_IDOWNLOAD_FILE))
#define STEADYFLOW_CORE_IDOWNLOAD_FILE_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), STEADYFLOW_CORE_TYPE_IDOWNLOAD_FILE, SteadyflowCoreIDownloadFileIface))

typedef struct _SteadyflowCoreIDownloadFile SteadyflowCoreIDownloadFile;
typedef struct _SteadyflowCoreIDownloadFileIface SteadyflowCoreIDownloadFileIface;

#define STEADYFLOW_CORE_IDOWNLOAD_FILE_TYPE_STATUS (steadyflow_core_idownload_file_status_get_type ())

#define STEADYFLOW_CORE_IDOWNLOAD_FILE_TYPE_FINISH_ACTION (steadyflow_core_idownload_file_finish_action_get_type ())

#define STEADYFLOW_CORE_TYPE_GIO_DOWNLOAD_FILE (steadyflow_core_gio_download_file_get_type ())
#define STEADYFLOW_CORE_GIO_DOWNLOAD_FILE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), STEADYFLOW_CORE_TYPE_GIO_DOWNLOAD_FILE, SteadyflowCoreGioDownloadFile))
#define STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), STEADYFLOW_CORE_TYPE_GIO_DOWNLOAD_FILE, SteadyflowCoreGioDownloadFileClass))
#define STEADYFLOW_CORE_IS_GIO_DOWNLOAD_FILE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), STEADYFLOW_CORE_TYPE_GIO_DOWNLOAD_FILE))
#define STEADYFLOW_CORE_IS_GIO_DOWNLOAD_FILE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), STEADYFLOW_CORE_TYPE_GIO_DOWNLOAD_FILE))
#define STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), STEADYFLOW_CORE_TYPE_GIO_DOWNLOAD_FILE, SteadyflowCoreGioDownloadFileClass))

typedef struct _SteadyflowCoreGioDownloadFile SteadyflowCoreGioDownloadFile;
typedef struct _SteadyflowCoreGioDownloadFileClass SteadyflowCoreGioDownloadFileClass;
typedef struct _SteadyflowCoreGioDownloadFilePrivate SteadyflowCoreGioDownloadFilePrivate;
#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
#define _g_timer_destroy0(var) ((var == NULL) ? NULL : (var = (g_timer_destroy (var), NULL)))
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
typedef struct _SteadyflowCoreGioDownloadFileDoDownloadData SteadyflowCoreGioDownloadFileDoDownloadData;

typedef enum  {
	STEADYFLOW_CORE_IDOWNLOAD_FILE_STATUS_CONNECTING = 0,
	STEADYFLOW_CORE_IDOWNLOAD_FILE_STATUS_DOWNLOADING,
	STEADYFLOW_CORE_IDOWNLOAD_FILE_STATUS_PAUSED,
	STEADYFLOW_CORE_IDOWNLOAD_FILE_STATUS_FINISHED,
	STEADYFLOW_CORE_IDOWNLOAD_FILE_STATUS_NETWORK_ERROR
} SteadyflowCoreIDownloadFileStatus;

typedef enum  {
	STEADYFLOW_CORE_IDOWNLOAD_FILE_FINISH_ACTION_DO_NOTHING = 0,
	STEADYFLOW_CORE_IDOWNLOAD_FILE_FINISH_ACTION_OPEN_FILE,
	STEADYFLOW_CORE_IDOWNLOAD_FILE_FINISH_ACTION_OPEN_FOLDER,
	STEADYFLOW_CORE_IDOWNLOAD_FILE_FINISH_ACTION_RUN_COMMAND
} SteadyflowCoreIDownloadFileFinishAction;

struct _SteadyflowCoreIDownloadFileIface {
	GTypeInterface parent_iface;
	void (*start) (SteadyflowCoreIDownloadFile* self, gboolean resume);
	void (*pause) (SteadyflowCoreIDownloadFile* self);
	void (*serialize) (SteadyflowCoreIDownloadFile* self, GKeyFile* file);
	SteadyflowCoreIDownloadFileStatus (*get_status) (SteadyflowCoreIDownloadFile* self);
	gint (*get_uid) (SteadyflowCoreIDownloadFile* self);
	const gchar* (*get_url) (SteadyflowCoreIDownloadFile* self);
	const gchar* (*get_local_name) (SteadyflowCoreIDownloadFile* self);
	const gchar* (*get_local_basename) (SteadyflowCoreIDownloadFile* self);
	gint64 (*get_size) (SteadyflowCoreIDownloadFile* self);
	gint64 (*get_downloaded_size) (SteadyflowCoreIDownloadFile* self);
	gint (*get_speed) (SteadyflowCoreIDownloadFile* self);
	const gchar* (*get_icon_name) (SteadyflowCoreIDownloadFile* self);
	SteadyflowCoreIDownloadFileFinishAction (*get_finish_action) (SteadyflowCoreIDownloadFile* self);
	const gchar* (*get_finish_command) (SteadyflowCoreIDownloadFile* self);
	GError* (*get_error) (SteadyflowCoreIDownloadFile* self);
};

struct _SteadyflowCoreGioDownloadFile {
	GObject parent_instance;
	SteadyflowCoreGioDownloadFilePrivate * priv;
};

struct _SteadyflowCoreGioDownloadFileClass {
	GObjectClass parent_class;
};

struct _SteadyflowCoreGioDownloadFilePrivate {
	gchar* _url;
	gchar* _local_name;
	gchar* _local_basename;
	gint _uid;
	gchar* _icon;
	gint64 _size;
	gint64 _old_downloaded_size;
	gint64 _downloaded_size;
	gint _speed;
	SteadyflowCoreIDownloadFileFinishAction _finish_action;
	gchar* _finish_command;
	SteadyflowCoreIDownloadFileStatus _status;
	GError* _error;
	GTimer* timer;
};

struct _SteadyflowCoreGioDownloadFileDoDownloadData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GSimpleAsyncResult* _async_result;
	SteadyflowCoreGioDownloadFile* self;
	GFile* remote;
	GFile* local;
	gboolean resume;
	GFileProgressCallback on_progress;
	gpointer on_progress_target;
	GFile* _tmp0_;
	GMount* _tmp1_;
	GMount* _tmp2_;
	GError* e_mount;
	GMountOperation* mount_op;
	GMountOperation* _tmp3_;
	GFile* _tmp4_;
	GMountOperation* _tmp5_;
	GFile* _tmp6_;
	GFileInfo* _tmp7_;
	GFileInfo* info;
	GFileInfo* _tmp8_;
	guint64 _tmp9_;
	GError* e_query;
	FILE* _tmp10_;
	GFile* _tmp11_;
	GFileInputStream* _tmp12_;
	GFileInputStream* input;
	GFileOutputStream* output;
	gboolean _tmp13_;
	gboolean _tmp14_;
	gboolean _tmp15_;
	GFileInputStream* _tmp16_;
	gboolean _tmp17_;
	gboolean _tmp18_;
	GFile* _tmp19_;
	gboolean _tmp20_;
	gboolean _tmp21_;
	GFile* _tmp22_;
	GFileOutputStream* _tmp23_;
	GFileOutputStream* _tmp24_;
	GFileOutputStream* _tmp25_;
	GFileOutputStream* _tmp26_;
	gint64 _tmp27_;
	GFileInputStream* _tmp28_;
	gint64 _tmp29_;
	GFile* _tmp30_;
	GFileOutputStream* _tmp31_;
	GFileOutputStream* _tmp32_;
	guint8* _tmp33_;
	guint8* buf;
	gint buf_length1;
	gint _buf_size_;
	SteadyflowCoreIDownloadFileStatus _tmp34_;
	SteadyflowCoreIDownloadFileStatus _tmp35_;
	GFileInputStream* _tmp36_;
	guint8* _tmp37_;
	gint _tmp37__length1;
	gssize _tmp38_;
	gssize read;
	gssize _tmp39_;
	GTimer* _tmp40_;
	GFileOutputStream* _tmp41_;
	guint8* _tmp42_;
	gint _tmp42__length1;
	gssize _tmp43_;
	gint64 _tmp44_;
	gssize _tmp45_;
	gint64 _tmp46_;
	GError* e;
	GError* _tmp47_;
	GError* _tmp48_;
	GTimer* _tmp49_;
	GError * _inner_error_;
};


static gpointer steadyflow_core_gio_download_file_parent_class = NULL;
static SteadyflowCoreIDownloadFileIface* steadyflow_core_gio_download_file_steadyflow_core_idownload_file_parent_iface = NULL;

GType steadyflow_core_idownload_file_status_get_type (void) G_GNUC_CONST;
GType steadyflow_core_idownload_file_finish_action_get_type (void) G_GNUC_CONST;
GType steadyflow_core_idownload_file_get_type (void) G_GNUC_CONST;
GType steadyflow_core_gio_download_file_get_type (void) G_GNUC_CONST;
#define STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), STEADYFLOW_CORE_TYPE_GIO_DOWNLOAD_FILE, SteadyflowCoreGioDownloadFilePrivate))
enum  {
	STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_DUMMY_PROPERTY,
	STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_STATUS,
	STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_UID,
	STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_URL,
	STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_LOCAL_NAME,
	STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_LOCAL_BASENAME,
	STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_SIZE,
	STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_DOWNLOADED_SIZE,
	STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_SPEED,
	STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_ICON_NAME,
	STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_FINISH_ACTION,
	STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_FINISH_COMMAND,
	STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_ERROR
};
#define STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_SPEED_UPDATE_SEC 2.0
SteadyflowCoreGioDownloadFile* steadyflow_core_gio_download_file_new (const gchar* url, const gchar* local_name, gint uid, SteadyflowCoreIDownloadFileFinishAction finish_action, const gchar* finish_command);
SteadyflowCoreGioDownloadFile* steadyflow_core_gio_download_file_construct (GType object_type, const gchar* url, const gchar* local_name, gint uid, SteadyflowCoreIDownloadFileFinishAction finish_action, const gchar* finish_command);
static void steadyflow_core_gio_download_file_set_status (SteadyflowCoreGioDownloadFile* self, SteadyflowCoreIDownloadFileStatus new_status);
static void steadyflow_core_gio_download_file_on_download_progress (SteadyflowCoreGioDownloadFile* self, gint64 current, gint64 total);
static void steadyflow_core_gio_download_file_real_start (SteadyflowCoreIDownloadFile* base, gboolean resume);
gboolean steadyflow_core_idownload_file_can_start (SteadyflowCoreIDownloadFile* self);
static void steadyflow_core_gio_download_file_do_download (SteadyflowCoreGioDownloadFile* self, GFile* remote, GFile* local, gboolean resume, GFileProgressCallback on_progress, void* on_progress_target, GAsyncReadyCallback _callback_, gpointer _user_data_);
static void steadyflow_core_gio_download_file_do_download_finish (SteadyflowCoreGioDownloadFile* self, GAsyncResult* _res_);
static void _steadyflow_core_gio_download_file_on_download_progress_gfile_progress_callback (gint64 current_num_bytes, gint64 total_num_bytes, gpointer self);
static void steadyflow_core_gio_download_file_do_download_data_free (gpointer _data);
static gboolean steadyflow_core_gio_download_file_do_download_co (SteadyflowCoreGioDownloadFileDoDownloadData* _data_);
static void steadyflow_core_gio_download_file_do_download_ready (GObject* source_object, GAsyncResult* _res_, gpointer _user_data_);
SteadyflowCoreIDownloadFileStatus steadyflow_core_idownload_file_get_status (SteadyflowCoreIDownloadFile* self);
static void steadyflow_core_gio_download_file_real_pause (SteadyflowCoreIDownloadFile* base);
gboolean steadyflow_core_idownload_file_can_pause (SteadyflowCoreIDownloadFile* self);
static void steadyflow_core_gio_download_file_real_serialize (SteadyflowCoreIDownloadFile* base, GKeyFile* keys);
gint steadyflow_core_idownload_file_get_uid (SteadyflowCoreIDownloadFile* self);
const gchar* steadyflow_core_idownload_file_get_url (SteadyflowCoreIDownloadFile* self);
const gchar* steadyflow_core_idownload_file_get_local_name (SteadyflowCoreIDownloadFile* self);
gint64 steadyflow_core_idownload_file_get_size (SteadyflowCoreIDownloadFile* self);
SteadyflowCoreIDownloadFileFinishAction steadyflow_core_idownload_file_get_finish_action (SteadyflowCoreIDownloadFile* self);
const gchar* steadyflow_core_idownload_file_get_finish_command (SteadyflowCoreIDownloadFile* self);
SteadyflowCoreIDownloadFile* steadyflow_core_gio_download_file_deserialize (GKeyFile* keys, gint uid, gboolean* should_start, GError** error);
static void steadyflow_core_gio_download_file_finalize (GObject* obj);
const gchar* steadyflow_core_idownload_file_get_local_basename (SteadyflowCoreIDownloadFile* self);
gint64 steadyflow_core_idownload_file_get_downloaded_size (SteadyflowCoreIDownloadFile* self);
gint steadyflow_core_idownload_file_get_speed (SteadyflowCoreIDownloadFile* self);
const gchar* steadyflow_core_idownload_file_get_icon_name (SteadyflowCoreIDownloadFile* self);
GError* steadyflow_core_idownload_file_get_error (SteadyflowCoreIDownloadFile* self);
static void _vala_steadyflow_core_gio_download_file_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);


SteadyflowCoreGioDownloadFile* steadyflow_core_gio_download_file_construct (GType object_type, const gchar* url, const gchar* local_name, gint uid, SteadyflowCoreIDownloadFileFinishAction finish_action, const gchar* finish_command) {
	SteadyflowCoreGioDownloadFile * self = NULL;
	const gchar* _tmp0_;
	gchar* _tmp1_;
	const gchar* _tmp2_;
	gchar* _tmp3_;
	gint _tmp4_;
	SteadyflowCoreIDownloadFileFinishAction _tmp5_;
	const gchar* _tmp6_;
	gchar* _tmp7_;
	const gchar* _tmp8_;
	GFile* _tmp9_ = NULL;
	GFile* local_file;
	GFile* _tmp10_;
	gchar* _tmp11_ = NULL;
	const gchar* _tmp12_;
	GFile* _tmp13_ = NULL;
	GFile* remote_file;
	guchar* data;
	gint data_length1;
	gint _data_size_;
	GFile* _tmp14_;
	gchar* _tmp15_ = NULL;
	gchar* _tmp16_;
	guchar* _tmp17_;
	gint _tmp17__length1;
	gchar* _tmp18_ = NULL;
	gchar* _tmp19_;
	gchar* content_type;
	const gchar* _tmp20_;
	GIcon* _tmp21_ = NULL;
	GIcon* icon;
	GIcon* _tmp22_;
	GTimer* _tmp29_;
	g_return_val_if_fail (url != NULL, NULL);
	g_return_val_if_fail (local_name != NULL, NULL);
	self = (SteadyflowCoreGioDownloadFile*) g_object_new (object_type, NULL);
	_tmp0_ = url;
	_tmp1_ = g_strdup (_tmp0_);
	_g_free0 (self->priv->_url);
	self->priv->_url = _tmp1_;
	_tmp2_ = local_name;
	_tmp3_ = g_strdup (_tmp2_);
	_g_free0 (self->priv->_local_name);
	self->priv->_local_name = _tmp3_;
	_tmp4_ = uid;
	self->priv->_uid = _tmp4_;
	_tmp5_ = finish_action;
	self->priv->_finish_action = _tmp5_;
	_tmp6_ = finish_command;
	_tmp7_ = g_strdup (_tmp6_);
	_g_free0 (self->priv->_finish_command);
	self->priv->_finish_command = _tmp7_;
	_tmp8_ = self->priv->_local_name;
	_tmp9_ = g_file_new_for_path (_tmp8_);
	local_file = _tmp9_;
	_tmp10_ = local_file;
	_tmp11_ = g_file_get_basename (_tmp10_);
	_g_free0 (self->priv->_local_basename);
	self->priv->_local_basename = _tmp11_;
	_tmp12_ = url;
	_tmp13_ = g_file_new_for_uri (_tmp12_);
	remote_file = _tmp13_;
	data = NULL;
	data_length1 = 0;
	_data_size_ = data_length1;
	_tmp14_ = remote_file;
	_tmp15_ = g_file_get_basename (_tmp14_);
	_tmp16_ = _tmp15_;
	_tmp17_ = data;
	_tmp17__length1 = data_length1;
	_tmp18_ = g_content_type_guess (_tmp16_, _tmp17_, (gsize) _tmp17__length1, NULL);
	_tmp19_ = _tmp18_;
	_g_free0 (_tmp16_);
	content_type = _tmp19_;
	_tmp20_ = content_type;
	_tmp21_ = g_content_type_get_icon (_tmp20_);
	icon = _tmp21_;
	_tmp22_ = icon;
	if (G_IS_THEMED_ICON (_tmp22_)) {
		GIcon* _tmp23_;
		gchar** _tmp24_;
		gint _tmp24__length1;
		gchar** _tmp25_;
		gint _tmp25__length1;
		const gchar* _tmp26_;
		gchar* _tmp27_;
		_tmp23_ = icon;
		_tmp24_ = g_themed_icon_get_names (G_IS_THEMED_ICON (_tmp23_) ? ((GThemedIcon*) _tmp23_) : NULL);
		_tmp25_ = _tmp24_;
		_tmp25__length1 = _tmp24__length1;
		_tmp26_ = _tmp25_[0];
		_tmp27_ = g_strdup (_tmp26_);
		_g_free0 (self->priv->_icon);
		self->priv->_icon = _tmp27_;
	} else {
		gchar* _tmp28_;
		_tmp28_ = g_strdup ("text-x-generic");
		_g_free0 (self->priv->_icon);
		self->priv->_icon = _tmp28_;
	}
	self->priv->_downloaded_size = (gint64) 0;
	self->priv->_old_downloaded_size = (gint64) 0;
	self->priv->_speed = 0;
	self->priv->_status = STEADYFLOW_CORE_IDOWNLOAD_FILE_STATUS_PAUSED;
	_tmp29_ = g_timer_new ();
	_g_timer_destroy0 (self->priv->timer);
	self->priv->timer = _tmp29_;
	_g_object_unref0 (icon);
	_g_free0 (content_type);
	data = (g_free (data), NULL);
	_g_object_unref0 (remote_file);
	_g_object_unref0 (local_file);
	return self;
}


SteadyflowCoreGioDownloadFile* steadyflow_core_gio_download_file_new (const gchar* url, const gchar* local_name, gint uid, SteadyflowCoreIDownloadFileFinishAction finish_action, const gchar* finish_command) {
	return steadyflow_core_gio_download_file_construct (STEADYFLOW_CORE_TYPE_GIO_DOWNLOAD_FILE, url, local_name, uid, finish_action, finish_command);
}


static void steadyflow_core_gio_download_file_set_status (SteadyflowCoreGioDownloadFile* self, SteadyflowCoreIDownloadFileStatus new_status) {
	SteadyflowCoreIDownloadFileStatus _tmp0_;
	SteadyflowCoreIDownloadFileStatus old_status;
	SteadyflowCoreIDownloadFileStatus _tmp1_;
	SteadyflowCoreIDownloadFileStatus _tmp2_;
	SteadyflowCoreIDownloadFileStatus _tmp3_;
	SteadyflowCoreIDownloadFileStatus _tmp4_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->_status;
	old_status = _tmp0_;
	_tmp1_ = new_status;
	self->priv->_status = _tmp1_;
	_tmp2_ = new_status;
	if (_tmp2_ != STEADYFLOW_CORE_IDOWNLOAD_FILE_STATUS_NETWORK_ERROR) {
		_g_error_free0 (self->priv->_error);
		self->priv->_error = NULL;
	}
	_tmp3_ = old_status;
	_tmp4_ = new_status;
	if (_tmp3_ != _tmp4_) {
		SteadyflowCoreIDownloadFileStatus _tmp5_;
		_tmp5_ = old_status;
		g_signal_emit_by_name ((SteadyflowCoreIDownloadFile*) self, "status-changed", _tmp5_);
	}
}


static void steadyflow_core_gio_download_file_on_download_progress (SteadyflowCoreGioDownloadFile* self, gint64 current, gint64 total) {
	gint64 _tmp0_;
	GTimer* _tmp1_;
	gdouble _tmp2_ = 0.0;
	gdouble elapsed;
	gdouble _tmp3_;
	gint64 _tmp9_;
	gint64 old_size;
	gint64 _tmp10_;
	g_return_if_fail (self != NULL);
	_tmp0_ = total;
	self->priv->_size = _tmp0_;
	_tmp1_ = self->priv->timer;
	_tmp2_ = g_timer_elapsed (_tmp1_, NULL);
	elapsed = _tmp2_;
	_tmp3_ = elapsed;
	if (_tmp3_ >= STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_SPEED_UPDATE_SEC) {
		gint64 _tmp4_;
		gint64 _tmp5_;
		gdouble _tmp6_;
		GTimer* _tmp7_;
		gint64 _tmp8_;
		_tmp4_ = current;
		_tmp5_ = self->priv->_old_downloaded_size;
		_tmp6_ = elapsed;
		self->priv->_speed = (gint) ((_tmp4_ - _tmp5_) / _tmp6_);
		_tmp7_ = self->priv->timer;
		g_timer_start (_tmp7_);
		_tmp8_ = current;
		self->priv->_old_downloaded_size = _tmp8_;
	}
	_tmp9_ = self->priv->_downloaded_size;
	old_size = _tmp9_;
	_tmp10_ = current;
	self->priv->_downloaded_size = _tmp10_;
	g_signal_emit_by_name ((SteadyflowCoreIDownloadFile*) self, "download-progressed", old_size);
}


static void _steadyflow_core_gio_download_file_on_download_progress_gfile_progress_callback (gint64 current_num_bytes, gint64 total_num_bytes, gpointer self) {
	steadyflow_core_gio_download_file_on_download_progress (self, current_num_bytes, total_num_bytes);
}


static void steadyflow_core_gio_download_file_real_start (SteadyflowCoreIDownloadFile* base, gboolean resume) {
	SteadyflowCoreGioDownloadFile * self;
	gboolean _tmp0_ = FALSE;
	const gchar* _tmp1_;
	GFile* _tmp2_ = NULL;
	GFile* file;
	GTimer* _tmp3_;
	GFile* _tmp4_;
	const gchar* _tmp5_;
	GFile* _tmp6_ = NULL;
	GFile* _tmp7_;
	gboolean _tmp8_;
	self = (SteadyflowCoreGioDownloadFile*) base;
	_tmp0_ = steadyflow_core_idownload_file_can_start ((SteadyflowCoreIDownloadFile*) self);
	if (!_tmp0_) {
		return;
	}
	steadyflow_core_gio_download_file_set_status (self, STEADYFLOW_CORE_IDOWNLOAD_FILE_STATUS_CONNECTING);
	_tmp1_ = self->priv->_url;
	_tmp2_ = g_file_new_for_uri (_tmp1_);
	file = _tmp2_;
	_tmp3_ = self->priv->timer;
	g_timer_start (_tmp3_);
	_tmp4_ = file;
	_tmp5_ = self->priv->_local_name;
	_tmp6_ = g_file_new_for_path (_tmp5_);
	_tmp7_ = _tmp6_;
	_tmp8_ = resume;
	steadyflow_core_gio_download_file_do_download (self, _tmp4_, _tmp7_, _tmp8_, _steadyflow_core_gio_download_file_on_download_progress_gfile_progress_callback, self, NULL, NULL);
	_g_object_unref0 (_tmp7_);
	_g_object_unref0 (file);
}


static void steadyflow_core_gio_download_file_do_download_data_free (gpointer _data) {
	SteadyflowCoreGioDownloadFileDoDownloadData* _data_;
	_data_ = _data;
	_g_object_unref0 (_data_->remote);
	_g_object_unref0 (_data_->local);
	_g_object_unref0 (_data_->self);
	g_slice_free (SteadyflowCoreGioDownloadFileDoDownloadData, _data_);
}


static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


static void steadyflow_core_gio_download_file_do_download (SteadyflowCoreGioDownloadFile* self, GFile* remote, GFile* local, gboolean resume, GFileProgressCallback on_progress, void* on_progress_target, GAsyncReadyCallback _callback_, gpointer _user_data_) {
	SteadyflowCoreGioDownloadFileDoDownloadData* _data_;
	SteadyflowCoreGioDownloadFile* _tmp0_;
	GFile* _tmp1_;
	GFile* _tmp2_;
	GFile* _tmp3_;
	GFile* _tmp4_;
	gboolean _tmp5_;
	GFileProgressCallback _tmp6_;
	void* _tmp6__target;
	_data_ = g_slice_new0 (SteadyflowCoreGioDownloadFileDoDownloadData);
	_data_->_async_result = g_simple_async_result_new (G_OBJECT (self), _callback_, _user_data_, steadyflow_core_gio_download_file_do_download);
	g_simple_async_result_set_op_res_gpointer (_data_->_async_result, _data_, steadyflow_core_gio_download_file_do_download_data_free);
	_tmp0_ = _g_object_ref0 (self);
	_data_->self = _tmp0_;
	_tmp1_ = remote;
	_tmp2_ = _g_object_ref0 (_tmp1_);
	_data_->remote = _tmp2_;
	_tmp3_ = local;
	_tmp4_ = _g_object_ref0 (_tmp3_);
	_data_->local = _tmp4_;
	_tmp5_ = resume;
	_data_->resume = _tmp5_;
	_tmp6_ = on_progress;
	_tmp6__target = on_progress_target;
	_data_->on_progress = _tmp6_;
	_data_->on_progress_target = _tmp6__target;
	steadyflow_core_gio_download_file_do_download_co (_data_);
}


static void steadyflow_core_gio_download_file_do_download_finish (SteadyflowCoreGioDownloadFile* self, GAsyncResult* _res_) {
	SteadyflowCoreGioDownloadFileDoDownloadData* _data_;
	_data_ = g_simple_async_result_get_op_res_gpointer (G_SIMPLE_ASYNC_RESULT (_res_));
}


static void steadyflow_core_gio_download_file_do_download_ready (GObject* source_object, GAsyncResult* _res_, gpointer _user_data_) {
	SteadyflowCoreGioDownloadFileDoDownloadData* _data_;
	_data_ = _user_data_;
	_data_->_source_object_ = source_object;
	_data_->_res_ = _res_;
	steadyflow_core_gio_download_file_do_download_co (_data_);
}


static gpointer _g_error_copy0 (gpointer self) {
	return self ? g_error_copy (self) : NULL;
}


static gboolean steadyflow_core_gio_download_file_do_download_co (SteadyflowCoreGioDownloadFileDoDownloadData* _data_) {
	switch (_data_->_state_) {
		case 0:
		goto _state_0;
		case 1:
		goto _state_1;
		case 2:
		goto _state_2;
		case 3:
		goto _state_3;
		case 4:
		goto _state_4;
		case 5:
		goto _state_5;
		case 6:
		goto _state_6;
		case 7:
		goto _state_7;
		case 8:
		goto _state_8;
		default:
		g_assert_not_reached ();
	}
	_state_0:
	{
		{
			_data_->_tmp0_ = _data_->remote;
			_data_->_state_ = 1;
			g_file_find_enclosing_mount_async (_data_->_tmp0_, 0, NULL, steadyflow_core_gio_download_file_do_download_ready, _data_);
			return FALSE;
			_state_1:
			_data_->_tmp1_ = NULL;
			_data_->_tmp1_ = g_file_find_enclosing_mount_finish (_data_->_tmp0_, _data_->_res_, &_data_->_inner_error_);
			_data_->_tmp2_ = _data_->_tmp1_;
			_g_object_unref0 (_data_->_tmp2_);
			if (_data_->_inner_error_ != NULL) {
				if (_data_->_inner_error_->domain == G_IO_ERROR) {
					goto __catch4_g_io_error;
				}
				goto __finally4;
			}
		}
		goto __finally4;
		__catch4_g_io_error:
		{
			_data_->e_mount = _data_->_inner_error_;
			_data_->_inner_error_ = NULL;
			_data_->_tmp3_ = NULL;
			g_signal_emit_by_name ((SteadyflowCoreIDownloadFile*) _data_->self, "get-mount-operation", &_data_->_tmp3_);
			_g_object_unref0 (_data_->mount_op);
			_data_->mount_op = _data_->_tmp3_;
			_data_->_tmp4_ = _data_->remote;
			_data_->_tmp5_ = _data_->mount_op;
			_data_->_state_ = 2;
			g_file_mount_enclosing_volume (_data_->_tmp4_, G_MOUNT_MOUNT_NONE, _data_->_tmp5_, NULL, steadyflow_core_gio_download_file_do_download_ready, _data_);
			return FALSE;
			_state_2:
			g_file_mount_enclosing_volume_finish (_data_->_tmp4_, _data_->_res_, &_data_->_inner_error_);
			if (_data_->_inner_error_ != NULL) {
				_g_object_unref0 (_data_->mount_op);
				_g_error_free0 (_data_->e_mount);
				goto __finally4;
			}
			_g_object_unref0 (_data_->mount_op);
			_g_error_free0 (_data_->e_mount);
		}
		__finally4:
		if (_data_->_inner_error_ != NULL) {
			goto __catch3_g_error;
		}
		{
			_data_->_tmp6_ = _data_->remote;
			_data_->_state_ = 3;
			g_file_query_info_async (_data_->_tmp6_, G_FILE_ATTRIBUTE_STANDARD_SIZE, G_FILE_QUERY_INFO_NONE, 0, NULL, steadyflow_core_gio_download_file_do_download_ready, _data_);
			return FALSE;
			_state_3:
			_data_->_tmp7_ = NULL;
			_data_->_tmp7_ = g_file_query_info_finish (_data_->_tmp6_, _data_->_res_, &_data_->_inner_error_);
			_data_->info = _data_->_tmp7_;
			if (_data_->_inner_error_ != NULL) {
				if (_data_->_inner_error_->domain == G_IO_ERROR) {
					goto __catch5_g_io_error;
				}
				goto __finally5;
			}
			_data_->_tmp8_ = _data_->info;
			_data_->_tmp9_ = 0ULL;
			_data_->_tmp9_ = g_file_info_get_attribute_uint64 (_data_->_tmp8_, G_FILE_ATTRIBUTE_STANDARD_SIZE);
			_data_->self->priv->_size = (gint64) _data_->_tmp9_;
			_g_object_unref0 (_data_->info);
		}
		goto __finally5;
		__catch5_g_io_error:
		{
			_data_->e_query = _data_->_inner_error_;
			_data_->_inner_error_ = NULL;
			_data_->_tmp10_ = stderr;
			fprintf (_data_->_tmp10_, "Cannot query file size, continuing with an unknown size\n");
			_g_error_free0 (_data_->e_query);
		}
		__finally5:
		if (_data_->_inner_error_ != NULL) {
			goto __catch3_g_error;
		}
		_data_->_tmp11_ = _data_->remote;
		_data_->_state_ = 4;
		g_file_read_async (_data_->_tmp11_, G_PRIORITY_DEFAULT, NULL, steadyflow_core_gio_download_file_do_download_ready, _data_);
		return FALSE;
		_state_4:
		_data_->_tmp12_ = NULL;
		_data_->_tmp12_ = g_file_read_finish (_data_->_tmp11_, _data_->_res_, &_data_->_inner_error_);
		_data_->input = _data_->_tmp12_;
		if (_data_->_inner_error_ != NULL) {
			goto __catch3_g_error;
		}
		_data_->_tmp15_ = _data_->resume;
		if (_data_->_tmp15_) {
			_data_->_tmp16_ = _data_->input;
			_data_->_tmp17_ = FALSE;
			_data_->_tmp17_ = G_FILE_INPUT_STREAM_GET_CLASS (_data_->_tmp16_)->can_seek (_data_->_tmp16_);
			_data_->_tmp14_ = _data_->_tmp17_;
		} else {
			_data_->_tmp14_ = FALSE;
		}
		_data_->_tmp18_ = _data_->_tmp14_;
		if (_data_->_tmp18_) {
			_data_->_tmp19_ = _data_->local;
			_data_->_tmp20_ = FALSE;
			_data_->_tmp20_ = g_file_query_exists (_data_->_tmp19_, NULL);
			_data_->_tmp13_ = _data_->_tmp20_;
		} else {
			_data_->_tmp13_ = FALSE;
		}
		_data_->_tmp21_ = _data_->_tmp13_;
		if (_data_->_tmp21_) {
			_data_->_tmp22_ = _data_->local;
			_data_->_state_ = 5;
			g_file_append_to_async (_data_->_tmp22_, G_FILE_CREATE_NONE, 0, NULL, steadyflow_core_gio_download_file_do_download_ready, _data_);
			return FALSE;
			_state_5:
			_data_->_tmp23_ = NULL;
			_data_->_tmp23_ = g_file_append_to_finish (_data_->_tmp22_, _data_->_res_, &_data_->_inner_error_);
			_data_->_tmp24_ = _data_->_tmp23_;
			if (_data_->_inner_error_ != NULL) {
				_g_object_unref0 (_data_->output);
				_g_object_unref0 (_data_->input);
				goto __catch3_g_error;
			}
			_g_object_unref0 (_data_->output);
			_data_->output = _data_->_tmp24_;
			_data_->_tmp25_ = _data_->output;
			G_FILE_OUTPUT_STREAM_GET_CLASS (_data_->_tmp25_)->seek (_data_->_tmp25_, (gint64) 0, G_SEEK_END, NULL, &_data_->_inner_error_);
			if (_data_->_inner_error_ != NULL) {
				_g_object_unref0 (_data_->output);
				_g_object_unref0 (_data_->input);
				goto __catch3_g_error;
			}
			_data_->_tmp26_ = _data_->output;
			_data_->_tmp27_ = 0LL;
			_data_->_tmp27_ = G_FILE_OUTPUT_STREAM_GET_CLASS (_data_->_tmp26_)->tell (_data_->_tmp26_);
			_data_->self->priv->_downloaded_size = _data_->_tmp27_;
			_data_->_tmp28_ = _data_->input;
			_data_->_tmp29_ = _data_->self->priv->_downloaded_size;
			G_FILE_INPUT_STREAM_GET_CLASS (_data_->_tmp28_)->seek (_data_->_tmp28_, _data_->_tmp29_, G_SEEK_SET, NULL, &_data_->_inner_error_);
			if (_data_->_inner_error_ != NULL) {
				_g_object_unref0 (_data_->output);
				_g_object_unref0 (_data_->input);
				goto __catch3_g_error;
			}
		} else {
			_data_->_tmp30_ = _data_->local;
			_data_->_state_ = 6;
			g_file_replace_async (_data_->_tmp30_, NULL, FALSE, G_FILE_CREATE_NONE, 0, NULL, steadyflow_core_gio_download_file_do_download_ready, _data_);
			return FALSE;
			_state_6:
			_data_->_tmp31_ = NULL;
			_data_->_tmp31_ = g_file_replace_finish (_data_->_tmp30_, _data_->_res_, &_data_->_inner_error_);
			_data_->_tmp32_ = _data_->_tmp31_;
			if (_data_->_inner_error_ != NULL) {
				_g_object_unref0 (_data_->output);
				_g_object_unref0 (_data_->input);
				goto __catch3_g_error;
			}
			_g_object_unref0 (_data_->output);
			_data_->output = _data_->_tmp32_;
		}
		steadyflow_core_gio_download_file_set_status (_data_->self, STEADYFLOW_CORE_IDOWNLOAD_FILE_STATUS_DOWNLOADING);
		_data_->_tmp33_ = NULL;
		_data_->_tmp33_ = g_new0 (guint8, 4096);
		_data_->buf = _data_->_tmp33_;
		_data_->buf_length1 = 4096;
		_data_->_buf_size_ = _data_->buf_length1;
		while (TRUE) {
			_data_->_tmp34_ = steadyflow_core_idownload_file_get_status ((SteadyflowCoreIDownloadFile*) _data_->self);
			_data_->_tmp35_ = _data_->_tmp34_;
			if (!(_data_->_tmp35_ == STEADYFLOW_CORE_IDOWNLOAD_FILE_STATUS_DOWNLOADING)) {
				break;
			}
			_data_->_tmp36_ = _data_->input;
			_data_->_tmp37_ = _data_->buf;
			_data_->_tmp37__length1 = _data_->buf_length1;
			_data_->_state_ = 7;
			g_input_stream_read_async ((GInputStream*) _data_->_tmp36_, _data_->_tmp37_, (gsize) _data_->_tmp37__length1, G_PRIORITY_DEFAULT, NULL, steadyflow_core_gio_download_file_do_download_ready, _data_);
			return FALSE;
			_state_7:
			_data_->_tmp38_ = 0L;
			_data_->_tmp38_ = g_input_stream_read_finish ((GInputStream*) _data_->_tmp36_, _data_->_res_, &_data_->_inner_error_);
			_data_->read = _data_->_tmp38_;
			if (_data_->_inner_error_ != NULL) {
				_data_->buf = (g_free (_data_->buf), NULL);
				_g_object_unref0 (_data_->output);
				_g_object_unref0 (_data_->input);
				goto __catch3_g_error;
			}
			_data_->_tmp39_ = _data_->read;
			if (_data_->_tmp39_ == ((gssize) 0)) {
				_data_->_tmp40_ = _data_->self->priv->timer;
				g_timer_stop (_data_->_tmp40_);
				steadyflow_core_gio_download_file_set_status (_data_->self, STEADYFLOW_CORE_IDOWNLOAD_FILE_STATUS_FINISHED);
				break;
			}
			_data_->_tmp41_ = _data_->output;
			_data_->_tmp42_ = _data_->buf;
			_data_->_tmp42__length1 = _data_->buf_length1;
			_data_->_tmp43_ = _data_->read;
			_data_->_state_ = 8;
			g_output_stream_write_async ((GOutputStream*) _data_->_tmp41_, _data_->_tmp42_ + 0, (gsize) (_data_->_tmp43_ - 0), G_PRIORITY_DEFAULT, NULL, steadyflow_core_gio_download_file_do_download_ready, _data_);
			return FALSE;
			_state_8:
			g_output_stream_write_finish ((GOutputStream*) _data_->_tmp41_, _data_->_res_, &_data_->_inner_error_);
			if (_data_->_inner_error_ != NULL) {
				_data_->buf = (g_free (_data_->buf), NULL);
				_g_object_unref0 (_data_->output);
				_g_object_unref0 (_data_->input);
				goto __catch3_g_error;
			}
			_data_->_tmp44_ = _data_->self->priv->_downloaded_size;
			_data_->_tmp45_ = _data_->read;
			_data_->_tmp46_ = _data_->self->priv->_size;
			steadyflow_core_gio_download_file_on_download_progress (_data_->self, _data_->_tmp44_ + _data_->_tmp45_, _data_->_tmp46_);
		}
		_data_->buf = (g_free (_data_->buf), NULL);
		_g_object_unref0 (_data_->output);
		_g_object_unref0 (_data_->input);
	}
	goto __finally3;
	__catch3_g_error:
	{
		_data_->e = _data_->_inner_error_;
		_data_->_inner_error_ = NULL;
		_data_->_tmp47_ = _data_->e;
		_data_->_tmp48_ = _g_error_copy0 (_data_->_tmp47_);
		_g_error_free0 (_data_->self->priv->_error);
		_data_->self->priv->_error = _data_->_tmp48_;
		steadyflow_core_gio_download_file_set_status (_data_->self, STEADYFLOW_CORE_IDOWNLOAD_FILE_STATUS_NETWORK_ERROR);
		_data_->_tmp49_ = _data_->self->priv->timer;
		g_timer_stop (_data_->_tmp49_);
		_g_error_free0 (_data_->e);
	}
	__finally3:
	if (_data_->_inner_error_ != NULL) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error_->message, g_quark_to_string (_data_->_inner_error_->domain), _data_->_inner_error_->code);
		g_clear_error (&_data_->_inner_error_);
		return FALSE;
	}
	if (_data_->_state_ == 0) {
		g_simple_async_result_complete_in_idle (_data_->_async_result);
	} else {
		g_simple_async_result_complete (_data_->_async_result);
	}
	g_object_unref (_data_->_async_result);
	return FALSE;
}


static void steadyflow_core_gio_download_file_real_pause (SteadyflowCoreIDownloadFile* base) {
	SteadyflowCoreGioDownloadFile * self;
	gboolean _tmp0_ = FALSE;
	self = (SteadyflowCoreGioDownloadFile*) base;
	_tmp0_ = steadyflow_core_idownload_file_can_pause ((SteadyflowCoreIDownloadFile*) self);
	if (_tmp0_) {
		GTimer* _tmp1_;
		steadyflow_core_gio_download_file_set_status (self, STEADYFLOW_CORE_IDOWNLOAD_FILE_STATUS_PAUSED);
		_tmp1_ = self->priv->timer;
		g_timer_stop (_tmp1_);
	}
}


static void steadyflow_core_gio_download_file_real_serialize (SteadyflowCoreIDownloadFile* base, GKeyFile* keys) {
	SteadyflowCoreGioDownloadFile * self;
	gint _tmp0_;
	gint _tmp1_;
	gchar* _tmp2_ = NULL;
	gchar* group;
	GKeyFile* _tmp3_;
	const gchar* _tmp4_;
	const gchar* _tmp5_;
	const gchar* _tmp6_;
	GKeyFile* _tmp7_;
	const gchar* _tmp8_;
	const gchar* _tmp9_;
	const gchar* _tmp10_;
	GKeyFile* _tmp11_;
	const gchar* _tmp12_;
	gint64 _tmp13_;
	gint64 _tmp14_;
	gchar* _tmp15_ = NULL;
	gchar* _tmp16_;
	GKeyFile* _tmp17_;
	const gchar* _tmp18_;
	SteadyflowCoreIDownloadFileStatus _tmp19_;
	SteadyflowCoreIDownloadFileStatus _tmp20_;
	GKeyFile* _tmp21_;
	const gchar* _tmp22_;
	SteadyflowCoreIDownloadFileFinishAction _tmp23_;
	SteadyflowCoreIDownloadFileFinishAction _tmp24_;
	SteadyflowCoreIDownloadFileFinishAction _tmp25_;
	SteadyflowCoreIDownloadFileFinishAction _tmp26_;
	self = (SteadyflowCoreGioDownloadFile*) base;
	g_return_if_fail (keys != NULL);
	_tmp0_ = steadyflow_core_idownload_file_get_uid ((SteadyflowCoreIDownloadFile*) self);
	_tmp1_ = _tmp0_;
	_tmp2_ = g_strdup_printf ("%i", _tmp1_);
	group = _tmp2_;
	_tmp3_ = keys;
	_tmp4_ = group;
	_tmp5_ = steadyflow_core_idownload_file_get_url ((SteadyflowCoreIDownloadFile*) self);
	_tmp6_ = _tmp5_;
	g_key_file_set_string (_tmp3_, _tmp4_, "url", _tmp6_);
	_tmp7_ = keys;
	_tmp8_ = group;
	_tmp9_ = steadyflow_core_idownload_file_get_local_name ((SteadyflowCoreIDownloadFile*) self);
	_tmp10_ = _tmp9_;
	g_key_file_set_string (_tmp7_, _tmp8_, "local_name", _tmp10_);
	_tmp11_ = keys;
	_tmp12_ = group;
	_tmp13_ = steadyflow_core_idownload_file_get_size ((SteadyflowCoreIDownloadFile*) self);
	_tmp14_ = _tmp13_;
	_tmp15_ = g_strdup_printf ("%" G_GINT64_FORMAT, _tmp14_);
	_tmp16_ = _tmp15_;
	g_key_file_set_string (_tmp11_, _tmp12_, "size", _tmp16_);
	_g_free0 (_tmp16_);
	_tmp17_ = keys;
	_tmp18_ = group;
	_tmp19_ = steadyflow_core_idownload_file_get_status ((SteadyflowCoreIDownloadFile*) self);
	_tmp20_ = _tmp19_;
	g_key_file_set_integer (_tmp17_, _tmp18_, "status", (gint) _tmp20_);
	_tmp21_ = keys;
	_tmp22_ = group;
	_tmp23_ = steadyflow_core_idownload_file_get_finish_action ((SteadyflowCoreIDownloadFile*) self);
	_tmp24_ = _tmp23_;
	g_key_file_set_integer (_tmp21_, _tmp22_, "finish_action", (gint) _tmp24_);
	_tmp25_ = steadyflow_core_idownload_file_get_finish_action ((SteadyflowCoreIDownloadFile*) self);
	_tmp26_ = _tmp25_;
	if (_tmp26_ == STEADYFLOW_CORE_IDOWNLOAD_FILE_FINISH_ACTION_RUN_COMMAND) {
		GKeyFile* _tmp27_;
		const gchar* _tmp28_;
		const gchar* _tmp29_;
		const gchar* _tmp30_;
		_tmp27_ = keys;
		_tmp28_ = group;
		_tmp29_ = steadyflow_core_idownload_file_get_finish_command ((SteadyflowCoreIDownloadFile*) self);
		_tmp30_ = _tmp29_;
		g_key_file_set_string (_tmp27_, _tmp28_, "finish_command", _tmp30_);
	}
	_g_free0 (group);
}


static gint64 int64_parse (const gchar* str) {
	gint64 result = 0LL;
	const gchar* _tmp0_;
	gint64 _tmp1_ = 0LL;
	g_return_val_if_fail (str != NULL, 0LL);
	_tmp0_ = str;
	_tmp1_ = g_ascii_strtoll (_tmp0_, NULL, (guint) 0);
	result = _tmp1_;
	return result;
}


SteadyflowCoreIDownloadFile* steadyflow_core_gio_download_file_deserialize (GKeyFile* keys, gint uid, gboolean* should_start, GError** error) {
	gboolean _vala_should_start = FALSE;
	SteadyflowCoreIDownloadFile* result = NULL;
	gint _tmp0_;
	gchar* _tmp1_ = NULL;
	gchar* group;
	GKeyFile* _tmp2_;
	const gchar* _tmp3_;
	gchar* _tmp4_ = NULL;
	gchar* url;
	GKeyFile* _tmp5_;
	const gchar* _tmp6_;
	gchar* _tmp7_ = NULL;
	gchar* local_name;
	GKeyFile* _tmp8_;
	const gchar* _tmp9_;
	gchar* _tmp10_ = NULL;
	gchar* _tmp11_;
	gchar* _tmp12_;
	gint64 _tmp13_ = 0LL;
	gint64 _tmp14_;
	gint64 size;
	GKeyFile* _tmp15_;
	const gchar* _tmp16_;
	gint _tmp17_ = 0;
	gint _tmp18_;
	SteadyflowCoreIDownloadFileStatus status;
	GKeyFile* _tmp19_;
	const gchar* _tmp20_;
	gint _tmp21_ = 0;
	gint _tmp22_;
	SteadyflowCoreIDownloadFileFinishAction finish_action;
	gchar* finish_command;
	SteadyflowCoreIDownloadFileFinishAction _tmp23_;
	const gchar* _tmp28_;
	const gchar* _tmp29_;
	gint _tmp30_;
	SteadyflowCoreIDownloadFileFinishAction _tmp31_;
	const gchar* _tmp32_;
	SteadyflowCoreGioDownloadFile* _tmp33_;
	SteadyflowCoreGioDownloadFile* file;
	SteadyflowCoreGioDownloadFile* _tmp34_;
	gint64 _tmp35_;
	SteadyflowCoreGioDownloadFile* _tmp36_;
	SteadyflowCoreIDownloadFileStatus _tmp37_;
	SteadyflowCoreGioDownloadFile* _tmp38_;
	gboolean _tmp39_ = FALSE;
	GError * _inner_error_ = NULL;
	g_return_val_if_fail (keys != NULL, NULL);
	_tmp0_ = uid;
	_tmp1_ = g_strdup_printf ("%i", _tmp0_);
	group = _tmp1_;
	_tmp2_ = keys;
	_tmp3_ = group;
	_tmp4_ = g_key_file_get_string (_tmp2_, _tmp3_, "url", &_inner_error_);
	url = _tmp4_;
	if (_inner_error_ != NULL) {
		g_propagate_error (error, _inner_error_);
		_g_free0 (group);
		return NULL;
	}
	_tmp5_ = keys;
	_tmp6_ = group;
	_tmp7_ = g_key_file_get_string (_tmp5_, _tmp6_, "local_name", &_inner_error_);
	local_name = _tmp7_;
	if (_inner_error_ != NULL) {
		g_propagate_error (error, _inner_error_);
		_g_free0 (url);
		_g_free0 (group);
		return NULL;
	}
	_tmp8_ = keys;
	_tmp9_ = group;
	_tmp10_ = g_key_file_get_string (_tmp8_, _tmp9_, "size", &_inner_error_);
	_tmp11_ = _tmp10_;
	if (_inner_error_ != NULL) {
		g_propagate_error (error, _inner_error_);
		_g_free0 (local_name);
		_g_free0 (url);
		_g_free0 (group);
		return NULL;
	}
	_tmp12_ = _tmp11_;
	_tmp13_ = int64_parse (_tmp12_);
	_tmp14_ = _tmp13_;
	_g_free0 (_tmp12_);
	size = _tmp14_;
	_tmp15_ = keys;
	_tmp16_ = group;
	_tmp17_ = g_key_file_get_integer (_tmp15_, _tmp16_, "status", &_inner_error_);
	_tmp18_ = _tmp17_;
	if (_inner_error_ != NULL) {
		g_propagate_error (error, _inner_error_);
		_g_free0 (local_name);
		_g_free0 (url);
		_g_free0 (group);
		return NULL;
	}
	status = (SteadyflowCoreIDownloadFileStatus) _tmp18_;
	_tmp19_ = keys;
	_tmp20_ = group;
	_tmp21_ = g_key_file_get_integer (_tmp19_, _tmp20_, "finish_action", &_inner_error_);
	_tmp22_ = _tmp21_;
	if (_inner_error_ != NULL) {
		g_propagate_error (error, _inner_error_);
		_g_free0 (local_name);
		_g_free0 (url);
		_g_free0 (group);
		return NULL;
	}
	finish_action = (SteadyflowCoreIDownloadFileFinishAction) _tmp22_;
	finish_command = NULL;
	_tmp23_ = finish_action;
	if (_tmp23_ == STEADYFLOW_CORE_IDOWNLOAD_FILE_FINISH_ACTION_RUN_COMMAND) {
		GKeyFile* _tmp24_;
		const gchar* _tmp25_;
		gchar* _tmp26_ = NULL;
		gchar* _tmp27_;
		_tmp24_ = keys;
		_tmp25_ = group;
		_tmp26_ = g_key_file_get_string (_tmp24_, _tmp25_, "finish_command", &_inner_error_);
		_tmp27_ = _tmp26_;
		if (_inner_error_ != NULL) {
			g_propagate_error (error, _inner_error_);
			_g_free0 (finish_command);
			_g_free0 (local_name);
			_g_free0 (url);
			_g_free0 (group);
			return NULL;
		}
		_g_free0 (finish_command);
		finish_command = _tmp27_;
	}
	_tmp28_ = url;
	_tmp29_ = local_name;
	_tmp30_ = uid;
	_tmp31_ = finish_action;
	_tmp32_ = finish_command;
	_tmp33_ = steadyflow_core_gio_download_file_new (_tmp28_, _tmp29_, _tmp30_, _tmp31_, _tmp32_);
	file = _tmp33_;
	_tmp34_ = file;
	_tmp35_ = size;
	_tmp34_->priv->_size = _tmp35_;
	_tmp36_ = file;
	_tmp37_ = status;
	_tmp36_->priv->_status = _tmp37_;
	_tmp38_ = file;
	_tmp39_ = steadyflow_core_idownload_file_can_pause ((SteadyflowCoreIDownloadFile*) _tmp38_);
	if (_tmp39_) {
		SteadyflowCoreGioDownloadFile* _tmp40_;
		_tmp40_ = file;
		_tmp40_->priv->_status = STEADYFLOW_CORE_IDOWNLOAD_FILE_STATUS_PAUSED;
		_vala_should_start = TRUE;
	} else {
		_vala_should_start = FALSE;
	}
	{
		const gchar* _tmp41_;
		GFile* _tmp42_ = NULL;
		GFile* local_file;
		GFile* _tmp43_;
		GFileInfo* _tmp44_ = NULL;
		GFileInfo* info;
		SteadyflowCoreGioDownloadFile* _tmp45_;
		GFileInfo* _tmp46_;
		guint64 _tmp47_ = 0ULL;
		_tmp41_ = local_name;
		_tmp42_ = g_file_new_for_path (_tmp41_);
		local_file = _tmp42_;
		_tmp43_ = local_file;
		_tmp44_ = g_file_query_info (_tmp43_, G_FILE_ATTRIBUTE_STANDARD_SIZE, G_FILE_QUERY_INFO_NONE, NULL, &_inner_error_);
		info = _tmp44_;
		if (_inner_error_ != NULL) {
			_g_object_unref0 (local_file);
			goto __catch6_g_error;
		}
		_tmp45_ = file;
		_tmp46_ = info;
		_tmp47_ = g_file_info_get_attribute_uint64 (_tmp46_, G_FILE_ATTRIBUTE_STANDARD_SIZE);
		_tmp45_->priv->_downloaded_size = (gint64) _tmp47_;
		_g_object_unref0 (info);
		_g_object_unref0 (local_file);
	}
	goto __finally6;
	__catch6_g_error:
	{
		GError* e = NULL;
		e = _inner_error_;
		_inner_error_ = NULL;
		_g_error_free0 (e);
	}
	__finally6:
	if (_inner_error_ != NULL) {
		g_propagate_error (error, _inner_error_);
		_g_object_unref0 (file);
		_g_free0 (finish_command);
		_g_free0 (local_name);
		_g_free0 (url);
		_g_free0 (group);
		return NULL;
	}
	result = (SteadyflowCoreIDownloadFile*) file;
	_g_free0 (finish_command);
	_g_free0 (local_name);
	_g_free0 (url);
	_g_free0 (group);
	if (should_start) {
		*should_start = _vala_should_start;
	}
	return result;
}


static SteadyflowCoreIDownloadFileStatus steadyflow_core_gio_download_file_real_get_status (SteadyflowCoreIDownloadFile* base) {
	SteadyflowCoreIDownloadFileStatus result;
	SteadyflowCoreGioDownloadFile* self;
	SteadyflowCoreIDownloadFileStatus _tmp0_;
	self = (SteadyflowCoreGioDownloadFile*) base;
	_tmp0_ = self->priv->_status;
	result = _tmp0_;
	return result;
}


static gint steadyflow_core_gio_download_file_real_get_uid (SteadyflowCoreIDownloadFile* base) {
	gint result;
	SteadyflowCoreGioDownloadFile* self;
	gint _tmp0_;
	self = (SteadyflowCoreGioDownloadFile*) base;
	_tmp0_ = self->priv->_uid;
	result = _tmp0_;
	return result;
}


static const gchar* steadyflow_core_gio_download_file_real_get_url (SteadyflowCoreIDownloadFile* base) {
	const gchar* result;
	SteadyflowCoreGioDownloadFile* self;
	const gchar* _tmp0_;
	self = (SteadyflowCoreGioDownloadFile*) base;
	_tmp0_ = self->priv->_url;
	result = _tmp0_;
	return result;
}


static const gchar* steadyflow_core_gio_download_file_real_get_local_name (SteadyflowCoreIDownloadFile* base) {
	const gchar* result;
	SteadyflowCoreGioDownloadFile* self;
	const gchar* _tmp0_;
	self = (SteadyflowCoreGioDownloadFile*) base;
	_tmp0_ = self->priv->_local_name;
	result = _tmp0_;
	return result;
}


static const gchar* steadyflow_core_gio_download_file_real_get_local_basename (SteadyflowCoreIDownloadFile* base) {
	const gchar* result;
	SteadyflowCoreGioDownloadFile* self;
	const gchar* _tmp0_;
	self = (SteadyflowCoreGioDownloadFile*) base;
	_tmp0_ = self->priv->_local_basename;
	result = _tmp0_;
	return result;
}


static gint64 steadyflow_core_gio_download_file_real_get_size (SteadyflowCoreIDownloadFile* base) {
	gint64 result;
	SteadyflowCoreGioDownloadFile* self;
	gint64 _tmp0_;
	self = (SteadyflowCoreGioDownloadFile*) base;
	_tmp0_ = self->priv->_size;
	result = _tmp0_;
	return result;
}


static gint64 steadyflow_core_gio_download_file_real_get_downloaded_size (SteadyflowCoreIDownloadFile* base) {
	gint64 result;
	SteadyflowCoreGioDownloadFile* self;
	gint64 _tmp0_;
	self = (SteadyflowCoreGioDownloadFile*) base;
	_tmp0_ = self->priv->_downloaded_size;
	result = _tmp0_;
	return result;
}


static gint steadyflow_core_gio_download_file_real_get_speed (SteadyflowCoreIDownloadFile* base) {
	gint result;
	SteadyflowCoreGioDownloadFile* self;
	gint _tmp0_;
	self = (SteadyflowCoreGioDownloadFile*) base;
	_tmp0_ = self->priv->_speed;
	result = _tmp0_;
	return result;
}


static const gchar* steadyflow_core_gio_download_file_real_get_icon_name (SteadyflowCoreIDownloadFile* base) {
	const gchar* result;
	SteadyflowCoreGioDownloadFile* self;
	const gchar* _tmp0_;
	self = (SteadyflowCoreGioDownloadFile*) base;
	_tmp0_ = self->priv->_icon;
	result = _tmp0_;
	return result;
}


static SteadyflowCoreIDownloadFileFinishAction steadyflow_core_gio_download_file_real_get_finish_action (SteadyflowCoreIDownloadFile* base) {
	SteadyflowCoreIDownloadFileFinishAction result;
	SteadyflowCoreGioDownloadFile* self;
	SteadyflowCoreIDownloadFileFinishAction _tmp0_;
	self = (SteadyflowCoreGioDownloadFile*) base;
	_tmp0_ = self->priv->_finish_action;
	result = _tmp0_;
	return result;
}


static const gchar* steadyflow_core_gio_download_file_real_get_finish_command (SteadyflowCoreIDownloadFile* base) {
	const gchar* result;
	SteadyflowCoreGioDownloadFile* self;
	const gchar* _tmp0_;
	self = (SteadyflowCoreGioDownloadFile*) base;
	_tmp0_ = self->priv->_finish_command;
	result = _tmp0_;
	return result;
}


static GError* steadyflow_core_gio_download_file_real_get_error (SteadyflowCoreIDownloadFile* base) {
	GError* result;
	SteadyflowCoreGioDownloadFile* self;
	GError* _tmp0_;
	self = (SteadyflowCoreGioDownloadFile*) base;
	_tmp0_ = self->priv->_error;
	result = _tmp0_;
	return result;
}


static void steadyflow_core_gio_download_file_class_init (SteadyflowCoreGioDownloadFileClass * klass) {
	steadyflow_core_gio_download_file_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (SteadyflowCoreGioDownloadFilePrivate));
	G_OBJECT_CLASS (klass)->get_property = _vala_steadyflow_core_gio_download_file_get_property;
	G_OBJECT_CLASS (klass)->finalize = steadyflow_core_gio_download_file_finalize;
	g_object_class_install_property (G_OBJECT_CLASS (klass), STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_STATUS, g_param_spec_enum ("status", "status", "status", STEADYFLOW_CORE_IDOWNLOAD_FILE_TYPE_STATUS, 0, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_UID, g_param_spec_int ("uid", "uid", "uid", G_MININT, G_MAXINT, 0, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_URL, g_param_spec_string ("url", "url", "url", NULL, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_LOCAL_NAME, g_param_spec_string ("local-name", "local-name", "local-name", NULL, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_LOCAL_BASENAME, g_param_spec_string ("local-basename", "local-basename", "local-basename", NULL, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_SIZE, g_param_spec_int64 ("size", "size", "size", G_MININT64, G_MAXINT64, 0, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_DOWNLOADED_SIZE, g_param_spec_int64 ("downloaded-size", "downloaded-size", "downloaded-size", G_MININT64, G_MAXINT64, 0, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_SPEED, g_param_spec_int ("speed", "speed", "speed", G_MININT, G_MAXINT, 0, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_ICON_NAME, g_param_spec_string ("icon-name", "icon-name", "icon-name", NULL, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_FINISH_ACTION, g_param_spec_enum ("finish-action", "finish-action", "finish-action", STEADYFLOW_CORE_IDOWNLOAD_FILE_TYPE_FINISH_ACTION, 0, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_FINISH_COMMAND, g_param_spec_string ("finish-command", "finish-command", "finish-command", NULL, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_ERROR, g_param_spec_pointer ("error", "error", "error", G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
}


static void steadyflow_core_gio_download_file_steadyflow_core_idownload_file_interface_init (SteadyflowCoreIDownloadFileIface * iface) {
	steadyflow_core_gio_download_file_steadyflow_core_idownload_file_parent_iface = g_type_interface_peek_parent (iface);
	iface->start = (void (*)(SteadyflowCoreIDownloadFile*, gboolean)) steadyflow_core_gio_download_file_real_start;
	iface->pause = (void (*)(SteadyflowCoreIDownloadFile*)) steadyflow_core_gio_download_file_real_pause;
	iface->serialize = (void (*)(SteadyflowCoreIDownloadFile*, GKeyFile*)) steadyflow_core_gio_download_file_real_serialize;
	iface->get_status = steadyflow_core_gio_download_file_real_get_status;
	iface->get_uid = steadyflow_core_gio_download_file_real_get_uid;
	iface->get_url = steadyflow_core_gio_download_file_real_get_url;
	iface->get_local_name = steadyflow_core_gio_download_file_real_get_local_name;
	iface->get_local_basename = steadyflow_core_gio_download_file_real_get_local_basename;
	iface->get_size = steadyflow_core_gio_download_file_real_get_size;
	iface->get_downloaded_size = steadyflow_core_gio_download_file_real_get_downloaded_size;
	iface->get_speed = steadyflow_core_gio_download_file_real_get_speed;
	iface->get_icon_name = steadyflow_core_gio_download_file_real_get_icon_name;
	iface->get_finish_action = steadyflow_core_gio_download_file_real_get_finish_action;
	iface->get_finish_command = steadyflow_core_gio_download_file_real_get_finish_command;
	iface->get_error = steadyflow_core_gio_download_file_real_get_error;
}


static void steadyflow_core_gio_download_file_instance_init (SteadyflowCoreGioDownloadFile * self) {
	self->priv = STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_GET_PRIVATE (self);
}


static void steadyflow_core_gio_download_file_finalize (GObject* obj) {
	SteadyflowCoreGioDownloadFile * self;
	self = STEADYFLOW_CORE_GIO_DOWNLOAD_FILE (obj);
	_g_free0 (self->priv->_url);
	_g_free0 (self->priv->_local_name);
	_g_free0 (self->priv->_local_basename);
	_g_free0 (self->priv->_icon);
	_g_free0 (self->priv->_finish_command);
	_g_error_free0 (self->priv->_error);
	_g_timer_destroy0 (self->priv->timer);
	G_OBJECT_CLASS (steadyflow_core_gio_download_file_parent_class)->finalize (obj);
}


GType steadyflow_core_gio_download_file_get_type (void) {
	static volatile gsize steadyflow_core_gio_download_file_type_id__volatile = 0;
	if (g_once_init_enter (&steadyflow_core_gio_download_file_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (SteadyflowCoreGioDownloadFileClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) steadyflow_core_gio_download_file_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (SteadyflowCoreGioDownloadFile), 0, (GInstanceInitFunc) steadyflow_core_gio_download_file_instance_init, NULL };
		static const GInterfaceInfo steadyflow_core_idownload_file_info = { (GInterfaceInitFunc) steadyflow_core_gio_download_file_steadyflow_core_idownload_file_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		GType steadyflow_core_gio_download_file_type_id;
		steadyflow_core_gio_download_file_type_id = g_type_register_static (G_TYPE_OBJECT, "SteadyflowCoreGioDownloadFile", &g_define_type_info, 0);
		g_type_add_interface_static (steadyflow_core_gio_download_file_type_id, STEADYFLOW_CORE_TYPE_IDOWNLOAD_FILE, &steadyflow_core_idownload_file_info);
		g_once_init_leave (&steadyflow_core_gio_download_file_type_id__volatile, steadyflow_core_gio_download_file_type_id);
	}
	return steadyflow_core_gio_download_file_type_id__volatile;
}


static void _vala_steadyflow_core_gio_download_file_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	SteadyflowCoreGioDownloadFile * self;
	self = STEADYFLOW_CORE_GIO_DOWNLOAD_FILE (object);
	switch (property_id) {
		case STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_STATUS:
		g_value_set_enum (value, steadyflow_core_idownload_file_get_status ((SteadyflowCoreIDownloadFile*) self));
		break;
		case STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_UID:
		g_value_set_int (value, steadyflow_core_idownload_file_get_uid ((SteadyflowCoreIDownloadFile*) self));
		break;
		case STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_URL:
		g_value_set_string (value, steadyflow_core_idownload_file_get_url ((SteadyflowCoreIDownloadFile*) self));
		break;
		case STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_LOCAL_NAME:
		g_value_set_string (value, steadyflow_core_idownload_file_get_local_name ((SteadyflowCoreIDownloadFile*) self));
		break;
		case STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_LOCAL_BASENAME:
		g_value_set_string (value, steadyflow_core_idownload_file_get_local_basename ((SteadyflowCoreIDownloadFile*) self));
		break;
		case STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_SIZE:
		g_value_set_int64 (value, steadyflow_core_idownload_file_get_size ((SteadyflowCoreIDownloadFile*) self));
		break;
		case STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_DOWNLOADED_SIZE:
		g_value_set_int64 (value, steadyflow_core_idownload_file_get_downloaded_size ((SteadyflowCoreIDownloadFile*) self));
		break;
		case STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_SPEED:
		g_value_set_int (value, steadyflow_core_idownload_file_get_speed ((SteadyflowCoreIDownloadFile*) self));
		break;
		case STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_ICON_NAME:
		g_value_set_string (value, steadyflow_core_idownload_file_get_icon_name ((SteadyflowCoreIDownloadFile*) self));
		break;
		case STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_FINISH_ACTION:
		g_value_set_enum (value, steadyflow_core_idownload_file_get_finish_action ((SteadyflowCoreIDownloadFile*) self));
		break;
		case STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_FINISH_COMMAND:
		g_value_set_string (value, steadyflow_core_idownload_file_get_finish_command ((SteadyflowCoreIDownloadFile*) self));
		break;
		case STEADYFLOW_CORE_GIO_DOWNLOAD_FILE_ERROR:
		g_value_set_pointer (value, steadyflow_core_idownload_file_get_error ((SteadyflowCoreIDownloadFile*) self));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}



